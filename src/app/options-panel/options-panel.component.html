<mat-card>
  <mat-card-title>Options</mat-card-title>
  <mat-card-content>
    <mat-form-field appearance="fill">
      <mat-label>App theme</mat-label>
      <mat-select [value]="currentTheme" (selectionChange)="onThemeChange($event.value)">
        <mat-option *ngFor="let theme of availableThemes" [value]="theme.id">
          {{ theme.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Simulation color scheme</mat-label>
      <mat-select
        [value]="currentSimulationColorSchemeId"
        [disabled]="adaCompliance"
        (selectionChange)="onSimulationColorSchemeChange($event.value)"
      >
        <mat-option *ngFor="let scheme of availableSimulationColorSchemes" [value]="scheme.id">
          {{ scheme.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div class="gol-options-hint" *ngIf="adaCompliance">
      ADA mode locks simulation colors to ADA Safe.
    </div>

    <mat-divider></mat-divider>
    <h2>Accessibility & Compliance</h2>
    <mat-checkbox [checked]="adaCompliance" (change)="toggleAdaCompliance($event)">
      Enable ADA Compliance Mode (Recommended)
    </mat-checkbox>
    <div class="gol-options-hint">
      Photosensitivity testing is available when ADA mode is enabled and unavailable when ADA mode is disabled.
    </div>

    <div class="gol-legal-warning" *ngIf="!adaCompliance">
      <h3>ADA protections are currently OFF</h3>
      <p>
        {{ adaOffLegalNotice }}
      </p>
    </div>

    <mat-divider></mat-divider>
    <h2>Privacy Controls</h2>
    <div class="gol-options-hint">
      Reset privacy controls to make the first-time ADA dialog appear again.
    </div>
    <div class="gol-privacy-actions">
      <button mat-stroked-button type="button" (click)="resetPrivacyControls()">
        Reset Privacy Controls
      </button>
    </div>

    <mat-divider></mat-divider>
    <h2>Performance Settings</h2>
    <mat-checkbox [checked]="performanceCaps.enableFPSCap" [disabled]="adaCompliance" (change)="toggleEnableFPSCap($event)">
      Enable FPS Cap
    </mat-checkbox>
    <mat-form-field appearance="fill">
      <mat-label>Max FPS</mat-label>
      <input
        matInput
        type="number"
        [value]="performanceCaps.maxFPS"
        [disabled]="adaCompliance"
        (input)="updateMaxFPS($event.target.value)"
      >
    </mat-form-field>

    <mat-checkbox [checked]="performanceCaps.enableGPSCap" [disabled]="adaCompliance" (change)="toggleEnableGPSCap($event)">
      Enable GPS Cap
    </mat-checkbox>
    <mat-form-field appearance="fill">
      <mat-label>Max GPS</mat-label>
      <input
        matInput
        type="number"
        [value]="performanceCaps.maxGPS"
        [disabled]="adaCompliance"
        (input)="updateMaxGPS($event.target.value)"
      >
    </mat-form-field>

    <mat-divider></mat-divider>
    <h2>Simulation Analysis</h2>
    <mat-checkbox [checked]="detectStablePopulation" (change)="toggleDetectStablePopulation($event)">
      Detect Stable Population
    </mat-checkbox>
    <mat-form-field appearance="fill">
      <mat-label>Max generations in chart</mat-label>
      <input
        matInput
        type="number"
        [value]="maxChartGenerations"
        (input)="updateMaxChartGenerations($event.target.value)"
      >
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Population window size</mat-label>
      <input
        matInput
        type="number"
        [value]="popWindowSize"
        (input)="updatePopWindowSize($event.target.value)"
      >
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Population tolerance</mat-label>
      <input
        matInput
        type="number"
        [value]="popTolerance"
        (input)="updatePopTolerance($event.target.value)"
      >
    </mat-form-field>
  </mat-card-content>
</mat-card>
